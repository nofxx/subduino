#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
require 'rubygems'
require 'optparse'
require 'subduino'

OptionParser.new { |op|
  op.on('-e env')    { |val| set :environment, val.to_sym }
  op.on('-s server') { |val| set :server, val }
  op.on('-p port')   { |val| set :port, val.to_i }
}.parse!(ARGV.dup)

# set :run, true

if ARGV.empty?

  Subduino.start do |read|
    puts "[IO] #{read}"
  end
end
